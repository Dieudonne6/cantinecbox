Route::get('/majpaiementeleve/{matricule}', [PagesController::class, 'majpaiementeleve'])->name('majpaiementeleve');

<li><a class="dropdown-item" href="{{ url('/majpaiementeleve/' . $eleve->MATRICULE) }}">Maj


public function majpaiementeleve($matricule){
    if(Session::has('account')){
        $eleve = Eleve::where('MATRICULE', $matricule)->first();
        
        // Récupérer les données de scolarité pour les paiements (AUTREF = 1)
        $scolarite = Scolarite::where('MATRICULE', $matricule)
            ->where('AUTREF', 1) // Pour les paiements
            ->get();

        // Récupérer les arriérés (AUTREF = 2)
        $arrières = Scolarite::where('MATRICULE', $matricule)
            ->where('AUTREF', 2) // Pour les arriérés
            ->get();

        // Calculer les totaux
        $totalScolarite = $scolarite->sum('MONTANT');
        $totalArrieres = $arrières->sum('MONTANT');

        // Vérifiez si l'élève existe
        if (!$eleve) {
            return redirect()->back()->withErrors(['L\'élève avec ce matricule n\'existe pas.']);
        }

        return view('pages.inscriptions.MajPaiement', compact('eleve', 'scolarite', 'arrières', 'totalScolarite', 'totalArrieres'));
    } 
    return redirect('/');
}


